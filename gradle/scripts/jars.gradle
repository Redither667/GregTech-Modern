apply plugin: "dev.architectury.loom"

shadowJar {
    dependsOn shadowJar.configurations
    configurations = [project.configurations.shadow]
    archiveClassifier = "dev-shadow"
    minimize()
    relocate("org.jgrapht", "${maven_group}.repack.org.jgrapht")
    relocate("org.jheaps", "${maven_group}.repack.org.jheaps")
    relocate("org.apfloat", "${maven_group}.repack.org.apfloat")
}

remapJar {
    inputFile.set shadowJar.archiveFile
    dependsOn shadowJar
    archiveClassifier = null
}

jar {
    exclude ".cache/*"

    archiveClassifier = "dev"
}

remapSlimJar {
    addNestedDependencies = false
    archiveClassifier = "slim"
}

tasks.register('sourcesJar', Jar) {
    from delombok.outputs.files
    dependsOn delombok
    archiveClassifier = "sources"
}

tasks.remapJar.dependsOn('remapSlimJar')


archivesBaseName = "${project.name}-${libs.versions.minecraft.get()}"
